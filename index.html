<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ Dashboard Financeiro 2030 - Colaborativo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Auth Screen -->
    <div id="authScreen" class="auth-screen">
        <div class="auth-container">
            <div class="auth-box">
                <h1><i class="fas fa-chart-line"></i> Dashboard Financeiro 2030</h1>
                <p>Controle compartilhado de finan√ßas em tempo real</p>

                <!-- Login Form -->
                <div id="loginForm" class="auth-form">
                    <h3>Login</h3>
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="loginEmail" placeholder="seu@email.com">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Senha</label>
                        <input type="password" class="form-control" id="loginPassword" placeholder="Sua senha">
                    </div>
                    <button class="btn btn-primary w-100 mb-3" onclick="fazerLogin()">Entrar</button>
                    <button class="btn btn-secondary w-100" onclick="mostrarRegistro()">Criar Conta</button>
                </div>

                <!-- Register Form -->
                <div id="registerForm" class="auth-form" style="display:none;">
                    <h3>Criar Conta</h3>
                    <div class="mb-3">
                        <label class="form-label">Nome</label>
                        <input type="text" class="form-control" id="registerNome" placeholder="Seu nome">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="registerEmail" placeholder="seu@email.com">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Senha</label>
                        <input type="password" class="form-control" id="registerPassword" placeholder="M√≠nimo 6 caracteres">
                    </div>
                    <button class="btn btn-success w-100 mb-3" onclick="fazerRegistro()">Registrar</button>
                    <button class="btn btn-secondary w-100" onclick="mostrarLogin()">Voltar ao Login</button>
                </div>

                <div id="authError" class="alert alert-danger mt-3" style="display:none;"></div>
            </div>
        </div>
    </div>

    <!-- App Screen -->
    <div id="appScreen" class="app-screen" style="display:none;">
        <div class="container-fluid">
            <!-- Header -->
            <header class="header">
                <div class="header-content">
                    <h1><i class="fas fa-chart-line"></i> Dashboard Financeiro 2030</h1>
                    <p class="subtitle" id="usuarioNome">Bem-vindo!</p>
                </div>
                <div class="header-buttons">
                    <button class="btn btn-settings" data-bs-toggle="modal" data-bs-target="#settingsModal">
                        <i class="fas fa-cog"></i> Configura√ß√µes
                    </button>
                    <button class="btn btn-logout" onclick="fazerLogout()">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </header>

            <!-- KPIs Section -->
            <section class="kpis-section">
                <div class="row g-4">
                    <div class="col-md-6 col-lg-3">
                        <div class="kpi-card">
                            <div class="kpi-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <i class="fas fa-wallet"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Patrim√¥nio Atual</p>
                                <p class="kpi-value" id="totalPatrimonio">R$ 0,00</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3">
                        <div class="kpi-card">
                            <div class="kpi-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                <i class="fas fa-arrow-up"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Receitas M√™s</p>
                                <p class="kpi-value" id="totalReceitas">R$ 0,00</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3">
                        <div class="kpi-card">
                            <div class="kpi-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                <i class="fas fa-arrow-down"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Despesas M√™s</p>
                                <p class="kpi-value" id="totalDespesas">R$ 0,00</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3">
                        <div class="kpi-card">
                            <div class="kpi-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                                <i class="fas fa-target"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Meta 2030</p>
                                <p class="kpi-value" id="metaGoal">R$ 112.000,00</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Action Buttons -->
            <section class="actions-section">
                <button class="btn btn-action btn-receita" data-bs-toggle="modal" data-bs-target="#receitaModal">
                    <i class="fas fa-plus"></i> Adicionar Receita
                </button>
                <button class="btn btn-action btn-despesa" data-bs-toggle="modal" data-bs-target="#despesaModal">
                    <i class="fas fa-minus"></i> Adicionar Despesa
                </button>
                <button class="btn btn-action btn-investimento" data-bs-toggle="modal" data-bs-target="#investimentoModal">
                    <i class="fas fa-chart-bar"></i> Adicionar Investimento
                </button>
            </section>

            <!-- Charts Section -->
            <section class="charts-section">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="chart-card">
                            <h5><i class="fas fa-chart-line"></i> Evolu√ß√£o do Patrim√¥nio</h5>
                            <canvas id="patrimonioChart"></canvas>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="chart-card">
                            <h5><i class="fas fa-chart-bar"></i> Proje√ß√£o at√© 2030</h5>
                            <canvas id="projecaoChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="row g-4 mt-0">
                    <div class="col-lg-6">
                        <div class="chart-card">
                            <h5><i class="fas fa-pie-chart"></i> Distribui√ß√£o por Categoria</h5>
                            <canvas id="categoriaChart"></canvas>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="chart-card">
                            <h5><i class="fas fa-balance-scale"></i> Receita vs Despesa</h5>
                            <canvas id="receitaDespesaChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Transactions Table -->
            <section class="transactions-section">
                <div class="transactions-header">
                    <h5><i class="fas fa-history"></i> Hist√≥rico de Transa√ß√µes</h5>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Tipo</th>
                                <th>Categoria</th>
                                <th>Descri√ß√£o</th>
                                <th>Valor</th>
                                <th>Usu√°rio</th>
                                <th>A√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsTable">
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </div>

    <!-- Modal Receita -->
    <div class="modal fade" id="receitaModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title"><i class="fas fa-arrow-up"></i> Adicionar Receita</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Data</label>
                        <input type="date" class="form-control" id="receitaData">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Categoria</label>
                        <select class="form-select" id="receitaCategoria">
                            <option value="Sal√°rio">Sal√°rio</option>
                            <option value="Rendimento">Rendimento</option>
                            <option value="B√¥nus">B√¥nus</option>
                            <option value="Aporte">Aporte</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Descri√ß√£o</label>
                        <input type="text" class="form-control" id="receitaDescricao" placeholder="Ex: Sal√°rio mensal">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Valor (R$)</label>
                        <input type="number" class="form-control" id="receitaValor" placeholder="0.00" step="0.01">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-success" onclick="adicionarReceita()">Adicionar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Despesa -->
    <div class="modal fade" id="despesaModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title"><i class="fas fa-arrow-down"></i> Adicionar Despesa</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Data</label>
                        <input type="date" class="form-control" id="despesaData">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Categoria</label>
                        <select class="form-select" id="despesaCategoria">
                            <option value="Alimenta√ß√£o">Alimenta√ß√£o</option>
                            <option value="Transporte">Transporte</option>
                            <option value="Moradia">Moradia</option>
                            <option value="Lazer">Lazer</option>
                            <option value="Sa√∫de">Sa√∫de</option>
                            <option value="Educa√ß√£o">Educa√ß√£o</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Descri√ß√£o</label>
                        <input type="text" class="form-control" id="despesaDescricao" placeholder="Ex: Supermercado">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Valor (R$)</label>
                        <input type="number" class="form-control" id="despesaValor" placeholder="0.00" step="0.01">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" onclick="adicionarDespesa()">Adicionar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Investimento -->
    <div class="modal fade" id="investimentoModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-info text-white">
                    <h5 class="modal-title"><i class="fas fa-chart-bar"></i> Adicionar Investimento</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Data</label>
                        <input type="date" class="form-control" id="investimentoData">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Tipo</label>
                        <select class="form-select" id="investimentoTipo">
                            <option value="A√ß√µes Brasil">A√ß√µes Brasil</option>
                            <option value="P&G USD">P&G USD</option>
                            <option value="Renda Fixa">Renda Fixa</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Moeda</label>
                        <select class="form-select" id="investimentoMoeda">
                            <option value="BRL">BRL (Real)</option>
                            <option value="USD">USD (D√≥lar)</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Valor</label>
                        <input type="number" class="form-control" id="investimentoValor" placeholder="0.00" step="0.01">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-info" onclick="adicionarInvestimento()">Adicionar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Configura√ß√µes -->
    <div class="modal fade" id="settingsModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-dark text-white">
                    <h5 class="modal-title"><i class="fas fa-cog"></i> Configura√ß√µes</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Cota√ß√£o USD ‚Üí BRL</label>
                        <div class="input-group">
                            <span class="input-group-text">US$</span>
                            <input type="number" class="form-control" id="usdRate" step="0.01" value="5.00">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Taxa de Rendimento Mensal (%)</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="monthlyRate" step="0.01" value="1.00">
                            <span class="input-group-text">%</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Meta de Patrim√¥nio 2030 (R$)</label>
                        <input type="number" class="form-control" id="targetGoal" step="1000" value="112000">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                    <button type="button" class="btn btn-primary" onclick="salvarConfigura√ß√µes()">Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="config.js"></script>
    <script type="module" src="auth.js"></script>
    <script type="module" src="app.js"></script>
</body>
</html>
